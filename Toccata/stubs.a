*
* $Id$
* $Log$
* Revision 1.2  1997/06/29 03:04:02  lcs
* RawPlayback() seems to work now!
*
* Revision 1.1  1997/06/25 19:45:09  lcs
* Initial revision
*
*

	include	exec/tasks.i
	include	utility/hooks.i
	include	lvo/exec_lib.i
	include	macros.i

	XREF	_ToccataBase
	XREF	_SlaveTask
	XREF	_RawReply

	XREF	_t_NextFrequency
	XREF	_t_FindFrequency
	XREF	_t_SetPart
	XREF	_t_GetPart
	XREF	_t_Capture
	XREF	_t_Playback
	XREF	_t_Pause
	XREF	_t_Stop
	XREF	_t_StartLevel
	XREF	_t_StopLevel
	XREF	_t_Expand
	XREF	_t_SaveSettings
	XREF	_t_LoadSettings
	XREF	_t_RawPlayback
	XREF	_t_IoErr
	XREF	_t_Open
	XREF	_t_Close
	XREF	_t_Record
	XREF	_t_Play
	XREF	_t_Convert
	XREF	_t_BytesPerSample
	XREF	_t_OpenFile
	XREF	_t_CloseFile
	XREF	_t_ReadFile
	XREF	_t_WriteSmpte
	XREF	_t_StopSmpte
	XREF	_t_Reserved1
	XREF	_t_Reserved2
	XREF	_t_Reserved3
	XREF	_t_Reserved4
	XREF	_t_Own
	XREF	_t_Disown
	XREF	_t_SetReg
	XREF	_t_GetReg



	XDEF	_GetRawReply
	XDEF	_HookLoad
	XDEF	_SlaveTaskEntry

	XDEF	_T_NextFrequency
	XDEF	_T_FindFrequency
	XDEF	_T_SetPart
	XDEF	_T_GetPart
	XDEF	_T_Capture
	XDEF	_T_Playback
	XDEF	_T_Pause
	XDEF	_T_Stop
	XDEF	_T_StartLevel
	XDEF	_T_StopLevel
	XDEF	_T_Expand
	XDEF	_T_SaveSettings
	XDEF	_T_LoadSettings
	XDEF	_T_RawPlayback
	XDEF	_T_IoErr
	XDEF	_T_Open
	XDEF	_T_Close
	XDEF	_T_Record
	XDEF	_T_Play
	XDEF	_T_Convert
	XDEF	_T_BytesPerSample
	XDEF	_T_OpenFile
	XDEF	_T_CloseFile
	XDEF	_T_ReadFile
	XDEF	_T_WriteSmpte
	XDEF	_T_StopSmpte
	XDEF	_T_Reserved1
	XDEF	_T_Reserved2
	XDEF	_T_Reserved3
	XDEF	_T_Reserved4
	XDEF	_T_Own
	XDEF	_T_Disown
	XDEF	_T_SetReg
	XDEF	_T_GetReg

_GetRawReply:
	push	a6
	move.l	a0,CRRtoccatabase
	base	exec
	call	CacheClearU
	move.l	#CallRawReply,d0
	pop	a6
	rts

CallRawReply:
	push	a6
	dc.w	$4DF9			; "lea.l xxx.l,a6
CRRtoccatabase:
	dc.l	0
	jsr	_RawReply
	pop	a6
	rts

_HookLoad:
	pushm	a5/a6
	move.l	h_Data(a0),a6
	move.l	h_SubEntry(a0),a5
	jsr	(a5)
	popm	a5/a6
	rts

_SlaveTaskEntry:
	move.l	4.w,a6
	suba.l	a1,a1
	call	FindTask
	move.l	d0,a0
	move.l	TC_Userdata(a0),a6
	jmp	_SlaveTask


* T_NextFrequency(freq)(d0)

_T_NextFrequency:
	pushm	d1/a0-a1
	jsr	_t_NextFrequency
	popm	d1/a0-a1
	rts

* T_FindFrequency(freq)(d0)

_T_FindFrequency:
	pushm	d1/a0-a1
	jsr	_t_FindFrequency
	popm	d1/a0-a1
	rts

* T_SetPart(tags)(a0)

_T_SetPart:
	pushm	d0-d1/a0-a1
	jsr	_t_SetPart
	popm	d0-d1/a0-a1
	rts

* T_GetPart(num)(a0)

_T_GetPart:
	pushm	d0-d1/a0-a1
	jsr	_t_GetPart
	popm	d0-d1/a0-a1
	rts

* T_Capture(tags)(a0)

_T_Capture:
	pushm	d1/a0-a1
	jsr	_t_Capture
	popm	d1/a0-a1
	rts

* T_Playback(tags)(a0)

_T_Playback:
	pushm	d1/a0-a1
	jsr	_t_Playback
	popm	d1/a0-a1
	rts

* T_Pause(pause)(d0)

_T_Pause:
	pushm	d0-d1/a0-a1
	jsr	_t_Pause
	popm	d0-d1/a0-a1
	rts

* T_Stop(flags)(d0)

_T_Stop:
	pushm	d0-d1/a0-a1
	jsr	_t_Stop
	popm	d0-d1/a0-a1
	rts

* T_StartLevel(tags)(a0)

_T_StartLevel:
	pushm	d1/a0-a1
	jsr	_t_StartLevel
	popm	d1/a0-a1
	rts

* T_StopLevel()()

_T_StopLevel:
	pushm	d0-d1/a0-a1
	jsr	_t_StopLevel
	popm	d0-d1/a0-a1
	rts

* T_Expand(value,mode)(d0,d1)

_T_Expand:
	pushm	d1/a0-a1
	jsr	_t_Expand
	popm	d1/a0-a1
	rts

* T_SaveSettings(flags)(d0)

_T_SaveSettings:
	pushm	d1/a0-a1
	jsr	_t_SaveSettings
	popm	d1/a0-a1
	rts

* T_LoadSettings(flags)(d0)

_T_LoadSettings:
	pushm	d1/a0-a1
	jsr	_t_LoadSettings
	popm	d1/a0-a1
	rts

* T_RawPlayback(tags)(a0)
_T_RawPlayback:
	pushm	d1/a0-a1
	jsr	_t_RawPlayback
	popm	d1/a0-a1
	rts
*
* functions added in v2:
*

* T_IoErr()()

_T_IoErr:
	pushm	d1/a0-a1
	jsr	_t_IoErr
	popm	d1/a0-a1
	rts
*
* functions added in v4:
*

* T_Open(name,tags)(a0,a1)

_T_Open:
	pushm	d1/a0-a1
	jsr	_t_Open
	popm	d1/a0-a1
	rts

* T_Close(handle)(a0)

_T_Close:
	pushm	d0-d1/a0-a1
	jsr	_t_Close
	popm	d0-d1/a0-a1
	rts

* T_Record(handle,tags)(a0,a1)

_T_Record:
	pushm	d1/a0-a1
	jsr	_t_Record
	popm	d1/a0-a1
	rts

* T_Play(handle,tags)(a0,a1)

_T_Play:
	pushm	d1/a0-a1
	jsr	_t_Play
	popm	d1/a0-a1
	rts

* T_Convert(src,dest,samples,srcMode,destMode)(a0,a1,d0,d1,d2)

_T_Convert:
	pushm	d0-d1/a0-a1
	jsr	_t_Convert
	popm	d0-d1/a0-a1
	rts

* T_BytesPerSample(mode)(d0)

_T_BytesPerSample:
	pushm	d1/a0-a1
	jsr	_t_BytesPerSample
	popm	d1/a0-a1
	rts

* T_OpenFile(name,flags)(a0,d0)
_T_OpenFile:
	pushm	d1/a0-a1
	jsr	_t_OpenFile
	popm	d1/a0-a1
	rts

* T_CloseFile(msh)(a0)

_T_CloseFile:
	pushm	d0-d1/a0-a1
	jsr	_t_CloseFile
	popm	d0-d1/a0-a1
	rts

* T_ReadFile(msh,buffer,size)(a0,a1,d0)

_T_ReadFile:
	pushm	d1/a0-a1
	jsr	_t_ReadFile
	popm	d1/a0-a1
	rts
*
* functions added in v5:
*

* T_WriteSmpte(startVal,fps,task,mask)(d0,d1,a0,d2)

_T_WriteSmpte:
	pushm	d1/a0-a1
	jsr	_t_WriteSmpte
	popm	d1/a0-a1
	rts

* T_StopSmpte(sh)(a0)

_T_StopSmpte:
	pushm	d1/a0-a1
	jsr	_t_StopSmpte
	popm	d1/a0-a1
	rts

*
* functions added in v6:
*
*
*---------- End of public part.
*---------- Private part is subject to change!
*
*

* T_Reserved1()()

_T_Reserved1:
	pushm	d1/a0-a1
	jsr	_t_Reserved1
	popm	d1/a0-a1
	rts

* T_Reserved2()()

_T_Reserved2:
	pushm	d1/a0-a1
	jsr	_t_Reserved2
	popm	d1/a0-a1
	rts

* T_Reserved3()()

_T_Reserved3:
	pushm	d1/a0-a1
	jsr	_t_Reserved3
	popm	d1/a0-a1
	rts

* T_Reserved4()()

_T_Reserved4:
	pushm	d1/a0-a1
	jsr	_t_Reserved4
	popm	d1/a0-a1
	rts

* T_Own()()

_T_Own:
	pushm	d0-d1/a0-a1
	jsr	_t_Own
	popm	d0-d1/a0-a1
	rts

* T_Disown()()

_T_Disown:
	pushm	d0-d1/a0-a1
	jsr	_t_Disown
	popm	d0-d1/a0-a1
	rts

* T_SetReg(reg,val)(d0,d1)

_T_SetReg:
	pushm	d0-d1/a0-a1
	jsr	_t_SetReg
	popm	d0-d1/a0-a1
	rts

* T_GetReg(reg)(d0)

_T_GetReg:
	pushm	d1/a0-a1
	jsr	_t_GetReg
	popm	d1/a0-a1
	rts
