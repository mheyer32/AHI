#  $Id$
#
#  Makefile.in for the AddAudioModes program
#


#
# Autoconfig stuff
########################################

@SET_MAKE@

srcdir		= @srcdir@
prefix		= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@

CC		= @CC@
INSTALL		= @INSTALL@

CPPFLAGS	= @CPPFLAGS@
CFLAGS		= @CFLAGS@
LDFLAGS		= @LDFLAGS@


VPATH		= @srcdir@


#
# Files
########################################

SOURCES		= AddAudioModes.c
OBJECTS		= $(SOURCES:%.c=%.o)
TARGET		= AddAudioModes


#
# Targets
########################################

.PHONY:		all clean distclean maintainer-clean install

all:		$(TARGET)

clean:
	$(RM) $(TARGET) version.h *.o *~ \#*\# core Makefile.dep

distclean:	clean
	$(RM) config.log config.cache config.status config.h\
	      stamp-h stamp-h.in Makefile

maintainer-clean: distclean
	$(RM) configure config.h.in

install:	$(TARGET)
	$(INSTALL) --directory $(bindir)
	$(INSTALL) --mode=755 --strip $(TARGET) $(bindir)/$(TARGET)

version.h:	AddAudioModes.c
	@echo $@
	@grep '$$Id' AddAudioModes.c | sed -e 's/^.*Id: .* \(.*\)\.\(.*\) ..\(..\)\/\(..\)\/\(..\).*/#define VERS "\1.\2 (\5.\4.\3)"/' > version.h


#
# Auto-remake autoconf stuff
########################################

${srcdir}/configure: configure.in
	cd ${srcdir} && autoconf

# autoheader might not change config.h.in, so touch a stamp file.
${srcdir}/config.h.in: stamp-h.in
${srcdir}/stamp-h.in: configure.in
	cd ${srcdir} && autoheader
	echo timestamp > ${srcdir}/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
	./config.status

Makefile: Makefile.in config.status
	./config.status

config.status: configure
	./config.status --recheck


#
# Dependencies
########################################

#Makefile.dep: $(SOURCES)
#	-@$(CC) $(CPPFLAGS) $(CFLAGS) -MM $(SOURCES) > $@
#
#include Makefile.dep

AddAudioModes.o: AddAudioModes.c version.h
